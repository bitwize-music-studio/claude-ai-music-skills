---
version: "0.59.0"
summary: "New configurable generation gates in config"
categories:
  - config
  - workflow
actions:
  - type: info
    description: "6 new server-enforced gates added — explicit flag blocking, lyric length, Suno link for Final, documentary source path, genre validation, streaming lyrics for release"
  - type: info
    description: "4 new generation settings available in config.yaml — all have safe defaults and work without config changes"
  - type: manual
    instruction: "To customize gate behavior, add any of these under 'generation:' in ~/.bitwize-music/config.yaml:\n\n  generation:\n    require_suno_link_for_final: true   # Set false to skip Suno link check for Final\n    max_lyric_words: 800                 # Raise/lower the lyric word count limit\n    require_source_path_for_documentary: true  # Set false if SOURCES.md isn't always documentary\n    additional_genres: []                # Add custom genres: [\"synthwave\", \"lo-fi\"]\n\nSee config/config.example.yaml for full documentation on each setting."
---

## Configurable Generation Gates

This release adds 6 server-enforced gates that close gaps between CLAUDE.md rules and actual enforcement. Four of the gates are configurable via `generation:` settings in config.

### New Gates (always on)

- **Explicit Flag → BLOCKING** — tracks cannot be Generated without explicit flag set to Yes or No (was just a warning)
- **Streaming Lyrics for Release** — albums cannot be Released if any track has missing/empty/placeholder streaming lyrics

### New Configurable Gates

| Gate | Config Key | Default | What It Does |
|------|-----------|---------|--------------|
| Suno link for Final | `require_suno_link_for_final` | `true` | Blocks Generated→Final without a Suno link |
| Lyric word count | `max_lyric_words` | `800` | Blocks generation if lyrics exceed limit |
| Documentary source path | `require_source_path_for_documentary` | `true` | Forces Concept→Research Complete→Sources Verified path for albums with SOURCES.md |
| Genre whitelist | `additional_genres` | `[]` | Extends the built-in 17 genres with custom entries |

### Why Defaults Work

All settings default to the strict/safe behavior. Existing users get full enforcement without touching their config. The settings exist for users who:

- Generate outside Suno (disable suno link requirement)
- Use a service with different word limits (raise max_lyric_words)
- Use SOURCES.md for non-documentary purposes like sample credits (disable source path)
- Work in subgenres not in the built-in list (add additional_genres)

### Genre Validation

Album creation now validates genres against a whitelist: blues, classical, country, electronic, folk, gospel, hip-hop, indie-folk, jazz, k-pop, latin, metal, pop, punk, reggae, rnb, rock. Common aliases are resolved automatically (e.g., "R&B" → "rnb", "Hip Hop" → "hip-hop"). Add custom genres via `additional_genres`.
